var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},__awaiter=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{h(i.next(t))}catch(e){o(e)}}function a(t){try{h(i["throw"](t))}catch(e){o(e)}}function h(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}h((i=i.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return i([t,e])}}function i(n){if(r)throw new TypeError("Generator is already executing.");for(;h;)try{if(r=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return h.label++,{value:n[1],done:!1};case 5:h.label++,o=n[1],n=[0];continue;case 7:n=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){h=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){h.label=n[1];break}if(6===n[0]&&h.label<s[1]){h.label=s[1],s=n;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(n);break}s[2]&&h.ops.pop(),h.trys.pop();continue}n=e.call(t,h)}catch(i){n=[6,i],o=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,o,s,a,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},ViewManager=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.init=function(){this.sceneBegin=new SceneBegin,this.sceneGame=SceneGame.getInstance(),this.start()},e.prototype.start=function(){this.initListener(),this.addChild(this.sceneBegin),this.sceneBegin.start()},e.prototype.initListener=function(){this.addEventListener(SceneEvents.SCENE_CHANGE,this.onChangeScene,this)},e.prototype.toBegin=function(){var t=this;ScreenMovies.MovieStart(5,function(){t.sceneBegin.start()}),this.sceneGame.end(),this.addChildAt(this.sceneBegin,0),this.removeChild(this.sceneGame)},e.prototype.toGame=function(){var t=this;ScreenMovies.MovieStart(5,function(){t.sceneGame.start()}),this.sceneBegin.end(),this.addChildAt(this.sceneGame,0),this.removeChild(this.sceneBegin)},e.prototype.toEnd=function(){},e.prototype.onChangeScene=function(t){switch(t.eventType){case SceneEvents.TO_BEGIN:this.toBegin();break;case SceneEvents.TO_GAME:this.toGame();break;case SceneEvents.TO_END:this.toEnd()}},e}(egret.DisplayObjectContainer);__reflect(ViewManager.prototype,"ViewManager");var Databus=function(){function t(){this.pool=Pool.getInstance(),this.reset()}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.reset=function(){this.frame=0,this.scores=0,this.bullets=[],this.enemys=[],this.gameOver=!1},t.prototype.removeEnemey=function(t){var e=this.enemys.shift();e.visible=!1,Pool.getInstance().recover("enemy",t)},t.prototype.removeBullets=function(t){var e=this.bullets.findIndex(function(e){return e===t});t.visible=!1,this.bullets.splice(e,1),this.pool.recover("bullet",t)},t}();__reflect(Databus.prototype,"Databus");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){switch(n.label){case 0:return[4,this.loadResource()];case 1:return n.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=n.sent(),[4,platform.login()];case 3:return n.sent(),[4,platform.getUserInfo()];case 4:return e=n.sent(),console.log(e),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,RES.loadGroup("preload",0,t)];case 2:return n.sent(),this.stage.removeChild(t),[3,4];case 3:return e=n.sent(),console.error(e),[3,4];case 4:return[2]}})})},e.prototype.createGameScene=function(){this.addChild(ViewManager.getInstance())},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var common;!function(t){function e(){return egret.MainContext.instance.stage}function n(){return egret.MainContext.instance.stage.stageWidth}function i(){return egret.MainContext.instance.stage.stageHeight}function r(t){var e=new egret.Bitmap,n=RES.getRes(t);return e.texture=n,e}function o(e,n,i){switch(e){case 1:egret.Tween.get(n).to({y:0},500,egret.Ease.circIn).call(function(){i&&i()});break;case 2:egret.Tween.get(n).to({y:-t.curHeight()},300,egret.Ease.circIn).call(function(){i&&i()})}}function s(t,e,n,i,r,o,s){var a=RES.getRes(s+"_json"),h=RES.getRes(s+"_png"),c=new egret.MovieClipDataFactory(a,h),u=new egret.MovieClip(c.generateMovieClipData(r));return u.x=n,u.y=i,e.addChild(u),u.gotoAndPlay(t,o),u.addEventListener(egret.Event.COMPLETE,function(t){e.removeChild(u)},this),u}t.curStage=e,t.curWidth=n,t.curHeight=i,t.createBitmapByName=r,t.gameOver=o,t.LoadMovieClipMovie=s}(common||(common={}));var Pool=function(){function t(){this.poolDic={}}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.getPoolBySign=function(t){return this.poolDic[t]||(this.poolDic[t]=[])},t.prototype.getItemByClass=function(t,e,n){var i=this.getPoolBySign(t);if(0===i.length)return new e(n);if(!n)return i.shift();var r=i.findIndex(function(t){return Object.keys(n).every(function(e){return t[e]===n[e]})});return-1!==r?i.splice(r,1)[0]:new e(n)},t.prototype.recover=function(t,e){this.getPoolBySign(t).push(e)},t}();__reflect(Pool.prototype,"Pool");var ScreenMovies;!function(t){function e(t,e){function n(t){_++,_==a&&(i.removeChild(s),e&&e())}var i=common.curStage(),r=common.curWidth(),o=common.curHeight(),s=new egret.Sprite;s.width=r,s.height=o,i.addChild(s);for(var a=40,h=5,c=a/h,u=0;a>u;u++){var l=r/h,g=o/c,d=u%h*l,p=Math.floor(u/h)*g,v=new egret.RenderTexture,m=(v.drawToTexture(i,new egret.Rectangle(d,p,l,g)),new egret.Bitmap);switch(m.texture=v,m.anchorOffsetX=l/2,m.anchorOffsetY=g/2,m.x=d+l/2,m.y=p+g/2,s.addChild(m),5==t&&(t=Math.ceil(4*Math.random())),t){case 1:var y=egret.Tween.get(m);y.to({scaleX:0,scaleY:0,alpha:0,rotation:359},800,egret.Ease.circIn).call(n,this);break;case 2:var f=-r;u%2||(f=2*r);var y=egret.Tween.get(m);y.to({x:f,alpha:0},800,egret.Ease.circIn).call(n,this);break;case 3:var y=egret.Tween.get(m);y.to({scaleX:.2,scaleY:1,alpha:0,blurFliter:0},800,egret.Ease.backInOut).call(n,this);break;case 4:var y=egret.Tween.get(m);y.to({alpha:0},900,egret.Ease.circIn).call(n,this);break;default:var y=egret.Tween.get(m);y.to({scaleX:1,scaleY:0,alpha:0},800,egret.Ease.circIn).call(n,this)}}var _=0}t.MovieStart=e}(ScreenMovies||(ScreenMovies={}));var game;!function(t){function e(t,e,n){t.type==egret.TouchEvent.TOUCH_BEGIN?(t.currentTarget.scaleX=1.05,t.currentTarget.scaleY=1.05):t.type==egret.TouchEvent.TOUCH_END?(t.currentTarget.scaleX=1,t.currentTarget.scaleY=1,e&&e()):t.type==egret.TouchEvent.TOUCH_RELEASE_OUTSIDE&&(t.currentTarget.scaleX=1,t.currentTarget.scaleY=1,n&&n())}t.touchAction=e}(game||(game={}));var SceneEvents=function(t){function e(e,n,i){return void 0===n&&(n=!1),void 0===i&&(i=!1),t.call(this,e,n,i)||this}return __extends(e,t),e.SCENE_CHANGE="scene_change",e.TO_BEGIN="to_begin",e.TO_GAME="to_game",e.TO_END="to_end",e}(egret.Event);__reflect(SceneEvents.prototype,"SceneEvents");var Enemy=function(t){function e(){var e=t.call(this)||this;return e.createEnemy(),e}return __extends(e,t),e.prototype.init=function(t){this.x=this.rnd(this.width/2,common.curWidth()-this.width/2),this.y=-this.height,this.speed=t,this.visible=!0,this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2},e.prototype.update=function(){this.y+=this.speed,this.y>common.curHeight()+this.height&&Databus.getInstance().removeEnemey(this)},e.prototype.playAnimation=function(){this.visible=!1;var t=common.LoadMovieClipMovie("bomb",SceneGame.getInstance().planeLayer,0,0,"bomb",1,"plane_bomb");t.width=64,t.height=48,t.x=this.x-t.width/2,t.y=this.y-t.height/2},e.prototype.shoot=function(){if(this.visible){var t=Databus.getInstance().pool.getItemByClass("bullet",Bullet,{direction:"down",owner:this});t.init(this.x,this.y+10,this.speed+5),SceneGame.getInstance().planeLayer.addChildAt(t,0),Databus.getInstance().bullets.push(t)}},e.prototype.createEnemy=function(){var t=common.createBitmapByName("enemy_png");this.addChild(t)},e.prototype.rnd=function(t,e){return Math.floor(Math.random()*(e-t)+t)},e.prototype.isCollideWith=function(t){var e=t.x,n=t.y;return this.visible&&t.visible?!!(e>=this.x-this.width/2&&e<=this.x+this.width/2&&n>=this.y-this.height/2&&n<=this.y+this.height/2):!1},e}(egret.Sprite);__reflect(Enemy.prototype,"Enemy");var Bullet=function(t){function e(e){var n=t.call(this)||this,i=e.direction,r=e.owner;return n.direction=i,n.createBullet(),n.owner=r,n}return __extends(e,t),e.prototype.createBullet=function(){var t;t="up"==this.direction?common.createBitmapByName("bullet_png"):common.createBitmapByName("bullet_down_png"),t.width=31,t.height=54,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,this.addChild(t)},e.prototype.init=function(t,e,n){this.x=t,this.y=e,this.speed=n,this.visible=!0},e.prototype.update=function(){"up"===this.direction?(this.y-=this.speed,this.y<-this.height&&Databus.getInstance().removeBullets(this)):(this.y+=this.speed,this.y>common.curHeight()+this.height&&Databus.getInstance().removeBullets(this))},e}(egret.Sprite);__reflect(Bullet.prototype,"Bullet");var Player=function(t){function e(){var e=t.call(this)||this;return e.playerLevel=1,e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=common.createBitmapByName("hero_png");this.addChild(t),this.hero=t},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},Object.defineProperty(e.prototype,"level",{get:function(){return this.playerLevel},set:function(t){this.playerLevel=Math.min(t,3)},enumerable:!0,configurable:!0}),e.prototype.shoot=function(){for(var t=0;t<this.playerLevel;t++){var e=Databus.getInstance().pool.getItemByClass("bullet",Bullet,{direction:"up",owner:this}),n=this.x;2==this.level&&(n=this.x+15);var i=t?t%2===0?n+30:n-30:n;e.init(i,this.y-20,10),SceneGame.getInstance().planeLayer.addChildAt(e,0),Databus.getInstance().bullets.push(e)}},e.prototype.isCollideWith=function(t){var e=t.x,n=t.y;return this.visible&&t.visible?!!(e>=this.x-this.width/2&&e<=this.x+this.width/2&&n>=this.y-this.height/2&&n<=this.y+this.height/2):!1},e}(egret.Sprite);__reflect(Player.prototype,"Player");var MoveUtil=function(t){function e(e,n){void 0===n&&(n=!0);var i=t.call(this)||this;return i._startPos=new egret.Point(0,0),i._endPos=new egret.Point(0,common.curHeight()),i._speedY=2,i._startSpeedY=2,i.obj=null,i.isLoop=!0,i._aSpeedY=.1,i.isGetDistance=!1,i.preEnterFrameTime=0,i.moveFrameNum=60,i.obj=e,i.isLoop=n,i}return __extends(e,t),Object.defineProperty(e.prototype,"startPos",{set:function(t){this._startPos!==t&&(this._startPos=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPos",{set:function(t){this._endPos!==t&&(this._endPos=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speedY",{set:function(t){this._startSpeedY!==t&&(this._startSpeedY=t)},enumerable:!0,configurable:!0}),e.prototype.getDistance=function(t){void 0===t&&(t=!1),this.isGetDistance=t},e.prototype.onEnterFrame=function(){if(!this.obj)return null;if(this.obj.y+=Math.floor(this._speedY),this._speedY>=36&&(this._speedY=36),this.obj.y>=this._endPos.y&&this.isLoop)this.obj.y=this._startPos.y;else if(this.obj.y>=this._endPos.y&&!this.isLoop)return void(this.obj=null);var t=Date.now();t-this.preEnterFrameTime>this.moveFrameNum&&(this.preEnterFrameTime=t,this.isLoop&&this.isGetDistance)},e}(egret.Sprite);__reflect(MoveUtil.prototype,"MoveUtil");var SceneBegin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.createBg(),this.addMoveClip()},e.prototype.start=function(){this.btn_start.touchEnabled=!0,this.btn_start.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.gameStart,this),this.btn_start.addEventListener(egret.TouchEvent.TOUCH_END,this.gameStart,this),this.btn_start.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.gameStart,this)},e.prototype.end=function(){this.btn_start.touchEnabled=!1,this.btn_start.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.gameStart,this),this.btn_start.removeEventListener(egret.TouchEvent.TOUCH_END,this.gameStart,this),this.btn_start.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.gameStart,this)},e.prototype.createBg=function(){var t=common.createBitmapByName("bg_jpg");this.addChild(t),t.width=common.curWidth(),t.height=common.curHeight(),this.btn_start=common.createBitmapByName("startGameBtn_png"),this.addChild(this.btn_start),this.btn_start.x=(common.curWidth()-this.btn_start.width)/2,this.btn_start.y=common.curHeight()-300},e.prototype.gameStart=function(t){var e=this;game.touchAction(t,function(){var t=new SceneEvents(SceneEvents.SCENE_CHANGE);t.eventType=SceneEvents.TO_GAME,t.eventObj=e,ViewManager.getInstance().dispatchEvent(t)})},e.prototype.addMoveClip=function(){return},e}(egret.DisplayObjectContainer);__reflect(SceneBegin.prototype,"SceneBegin");var SceneGame=function(t){function e(){var e=t.call(this)||this;return e.heroCon=new egret.Sprite,e.isTouching=!1,e.planeLayer=new egret.Sprite,e.userScores=new egret.BitmapText,e.overScores=new egret.TextField,e.over_panel=new egret.Sprite,e.ENEMY_SPEED=6,e.downPoint=new egret.Point,e.startPoint=new egret.Point,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.createBg(),this.overPanel()},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.start=function(){this.createHero(),this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.back_home.touchEnabled=!0,this.back_home.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toBegin,this)},e.prototype.end=function(){this.hasEventListener(egret.Event.ENTER_FRAME)&&this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.touchEnabled=!1,this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.hasEventListener(egret.TouchEvent.TOUCH_MOVE)&&this.touchEnd(),this.back_home.touchEnabled=!1,this.back_home.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.toBegin,this)},e.prototype.touchBegin=function(t){this.isTouching=!0,this.downPoint.x=t.stageX,this.downPoint.y=t.stageY,this.startPoint.x=this.player.x,this.startPoint.y=this.player.y,this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},e.prototype.touchMove=function(t){this.isTouching&&(this.player.x=this.startPoint.x+(t.stageX-this.downPoint.x),this.player.y=this.startPoint.y+(t.stageY-this.downPoint.y))},e.prototype.touchEnd=function(){this.isTouching=!1,this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},e.prototype.createBg=function(){this.bg01=common.createBitmapByName("bg_game_jpg"),this.bg02=common.createBitmapByName("bg_game_jpg"),this.bg01.width=this.bg02.width=common.curWidth(),this.bg01.height=this.bg02.height=common.curHeight(),this.addChild(this.bg01),this.addChild(this.bg02),this.bg02.y=-common.curHeight(),this.userScores.text="0",this.userScores.x=20,this.userScores.y=20,this.userScores.font=RES.getRes("roadnum_fnt"),this.addChild(this.userScores),this.bg01MoveUtil=new MoveUtil(this.bg01),this.bg02MoveUtil=new MoveUtil(this.bg02),this.bg01MoveUtil.startPos=new egret.Point(0,0),this.bg01MoveUtil.endPos=new egret.Point(0,common.curHeight()),this.bg02MoveUtil.startPos=new egret.Point(0,-common.curHeight()),this.bg02MoveUtil.endPos=new egret.Point(0,0),this.back_home=new egret.Sprite,this.addChild(this.back_home);var t=common.createBitmapByName("back_home_png"),e=new egret.TextField;t.width=120,t.height=60,e.text="BACK",e.width=t.width,e.textColor=0,e.textAlign="center",e.size=32,e.y=14,e.bold=!0,this.back_home.x=10,this.back_home.y=common.curHeight()-t.height-5,this.back_home.addChild(t),this.back_home.addChild(e)},e.prototype.createHero=function(){this.player=Player.getInstance(),this.player.anchorOffsetX=this.player.width/2,this.player.anchorOffsetY=this.player.height/2,this.player.x=common.curWidth()/2,this.player.y=common.curHeight()-200,this.planeLayer.addChild(this.player),this.addChild(this.planeLayer)},e.prototype.enemyGenerate=function(){if(Databus.getInstance().frame%80===0){var t=Databus.getInstance().pool.getItemByClass("enemy",Enemy);t.init(this.ENEMY_SPEED),this.planeLayer.addChild(t),Databus.getInstance().enemys.push(t)}},e.prototype.onEnterFrame=function(t){var e=this;return Databus.getInstance().gameOver?void this.gameEnd():(Databus.getInstance().frame++,this.bg01MoveUtil.onEnterFrame(),this.bg02MoveUtil.onEnterFrame(),this.enemyGenerate(),Databus.getInstance().bullets.concat(Databus.getInstance().enemys).forEach(function(t){t.update()}),Databus.getInstance().frame%20===0&&Player.getInstance().shoot(),Databus.getInstance().enemys.forEach(function(t){var n=[-t.height+15*e.ENEMY_SPEED,-t.height+90*e.ENEMY_SPEED];-1!==n.indexOf(t.y)&&t.shoot()}),Player.getInstance().level=Math.max(1,Math.ceil(Databus.getInstance().scores/30)),this.collisionDetection(),void(this.userScores.text=Databus.getInstance().scores.toString()))},e.prototype.resetData=function(){this.bg01.y=0,this.bg02.y=-common.curHeight(),this.bg01MoveUtil._speedY=2,this.bg02MoveUtil._speedY=2,this.heroCon.x=common.curWidth()-200},e.prototype.collisionDetection=function(){Databus.getInstance().bullets.forEach(function(t){for(var e=0,n=Databus.getInstance().enemys.length;n>e;e++){var i=Databus.getInstance().enemys[e];if(t.owner instanceof Enemy){Databus.getInstance().gameOver=Player.getInstance().isCollideWith(t);break}if(!i.isPlaying&&i.isCollideWith(t)){i.playAnimation(),t.visible=!1,Databus.getInstance().scores+=1;break}}});for(var t=0,e=Databus.getInstance().enemys.length;e>t;t++){var n=Databus.getInstance().enemys[t];if(Player.getInstance().isCollideWith(n)){Databus.getInstance().gameOver=!0;break}}},e.prototype.overPanel=function(){var t=new egret.Shape;t.graphics.beginFill(0,.75),t.graphics.drawRect(0,0,common.curWidth(),common.curHeight());var e=common.createBitmapByName("game_over_bg_png");e.width=480,e.height=432,e.x=(common.curWidth()-e.width)/2,e.y=(common.curHeight()-e.height)/2;var n=new egret.TextField;n.text="游戏结束",n.textColor=16777215,n.bold=!0,n.size=36,n.width=e.width,n.textAlign="center",n.y=e.y+60,n.x=e.x,this.overScores.text="得分：0",this.overScores.textColor=16777215,this.overScores.size=30,this.overScores.width=e.width,this.overScores.textAlign="center",this.overScores.bold=!0,this.overScores.x=e.x,this.overScores.y=n.y+116,this.restartBtn=new egret.Sprite;var i=common.createBitmapByName("restart_btn_png");i.width=220,i.height=80;var r=new egret.TextField;r.text="重新开始",r.bold=!0,r.size=30,r.width=i.width,r.textAlign="center",r.y=20,this.restartBtn.addChild(i),this.restartBtn.addChild(r),this.restartBtn.x=(common.curWidth()-this.restartBtn.width)/2,this.restartBtn.y=this.overScores.y+70,this.restartBtn.touchEnabled=!0,this.restartBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.restartGame,this),this.over_panel.addChild(t),this.over_panel.addChild(e),this.over_panel.addChild(n),this.over_panel.addChild(this.overScores),this.over_panel.addChild(this.restartBtn)},e.prototype.gameEnd=function(){var t=this;this.overScores.text="得分："+Databus.getInstance().scores.toString(),this.addChildAt(this.over_panel,this.$children.length-1),setTimeout(function(){t.end()},50)},e.prototype.restartGame=function(t){this.removeChild(this.over_panel),this.planeLayer.removeChildren(),Databus.getInstance().reset(),this.start()},e.prototype.toBegin=function(){this.planeLayer.removeChildren(),Databus.getInstance().reset();var t=new SceneEvents(SceneEvents.SCENE_CHANGE);t.eventType=SceneEvents.TO_BEGIN,t.eventObj=this,ViewManager.getInstance().dispatchEvent(t)},e}(egret.DisplayObjectContainer);__reflect(SceneGame.prototype,"SceneGame");