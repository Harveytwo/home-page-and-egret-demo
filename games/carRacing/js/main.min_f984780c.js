var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},__awaiter=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{h(i.next(t))}catch(e){a(e)}}function o(t){try{h(i["throw"](t))}catch(e){a(e)}}function h(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,o)}h((i=i.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return i([t,e])}}function i(n){if(r)throw new TypeError("Generator is already executing.");for(;h;)try{if(r=1,a&&(s=a[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(a,n[1])).done)return s;switch(a=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return h.label++,{value:n[1],done:!1};case 5:h.label++,a=n[1],n=[0];continue;case 7:n=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){h=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){h.label=n[1];break}if(6===n[0]&&h.label<s[1]){h.label=s[1],s=n;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(n);break}s[2]&&h.ops.pop(),h.trys.pop();continue}n=e.call(t,h)}catch(i){n=[6,i],a=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},ScreenMovies;!function(t){function e(t,e){function n(t){E++,E==o&&(i.removeChild(s),e&&e())}var i=common.curStage(),r=common.curWidth(),a=common.curHeight(),s=new egret.Sprite;s.width=r,s.height=a,i.addChild(s);for(var o=40,h=5,c=o/h,g=0;o>g;g++){var u=r/h,d=a/c,l=g%h*u,m=Math.floor(g/h)*d,p=new egret.RenderTexture,_=(p.drawToTexture(i,new egret.Rectangle(l,m,u,d)),new egret.Bitmap);switch(_.texture=p,_.anchorOffsetX=u/2,_.anchorOffsetY=d/2,_.x=l+u/2,_.y=m+d/2,s.addChild(_),5==t&&(t=Math.ceil(4*Math.random())),t){case 1:var v=egret.Tween.get(_);v.to({scaleX:0,scaleY:0,alpha:0,rotation:359},800,egret.Ease.circIn).call(n,this);break;case 2:var f=-r;g%2||(f=2*r);var v=egret.Tween.get(_);v.to({x:f,alpha:0},800,egret.Ease.circIn).call(n,this);break;case 3:var v=egret.Tween.get(_);v.to({scaleX:.2,scaleY:1,alpha:0,blurFliter:0},800,egret.Ease.backInOut).call(n,this);break;case 4:var v=egret.Tween.get(_);v.to({alpha:0},900,egret.Ease.circIn).call(n,this);break;default:var v=egret.Tween.get(_);v.to({scaleX:1,scaleY:0,alpha:0},800,egret.Ease.circIn).call(n,this)}}var E=0}t.MovieStart=e}(ScreenMovies||(ScreenMovies={}));var Data=function(){function t(){}return t.gameResult=!0,t.distanceLength=0,t.targetDistance=1e4,t.stageH=800,t.stageW=480,t.currentSpeedY=6,t.startSpeed=6,t.mostSpeed=36,t}();__reflect(Data.prototype,"Data");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.img_loadingCarCon=new egret.Sprite,e.loadingBg="resource/mySources/loadingBg.png",e.loadingCar="resource/mySources/loadingCar.png",e.loadingLength=235,e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.textField.size=24,this.textField.x=14,this.textField.y=6,this.w=egret.Capabilities.boundingClientWidth,this.h=egret.Capabilities.boundingClientHeight;var t=new egret.URLLoader;t.addEventListener(egret.Event.COMPLETE,this.onComplete,this),t.dataFormat=egret.URLLoaderDataFormat.TEXTURE,t.load(new egret.URLRequest(this.loadingBg)),this.w=egret.Capabilities.boundingClientWidth,this.h=egret.Capabilities.boundingClientHeight;var t=new egret.URLLoader;t.addEventListener(egret.Event.COMPLETE,this.onComplete,this),t.dataFormat=egret.URLLoaderDataFormat.TEXTURE,t.load(new egret.URLRequest(this.loadingCar)),this.img_loadingBg=new egret.Bitmap,this.img_loadingCar=new egret.Bitmap,this.addChildAt(this.img_loadingBg,0),this.img_loadingCarCon.addChild(this.img_loadingCar),this.img_loadingCarCon.addChild(this.textField),this.addChild(this.img_loadingCarCon)},e.prototype.onComplete=function(t){var e=t.target,n=e.data;if(e._request.url==this.loadingBg){this.img_loadingBg.texture=n;var i=this.img_loadingBg.width,r=this.img_loadingBg.height;this.w/640<this.h/1136?(this.img_loadingBg.scaleX=1,this.img_loadingBg.scaleY=this.stage.stageHeight/r,this.img_loadingCarCon.y=332*(this.stage.stageHeight/r)):(this.img_loadingBg.scaleY=1,this.img_loadingBg.scaleX=this.stage.stageWidth/i,this.img_loadingCarCon.y=328)}else e._request.url==this.loadingCar&&(this.img_loadingCar.texture=n,this.img_loadingCarCon.x=80)},e.prototype.onProgress=function(t,e){this.textField.text=Math.round(t/e*100)+"%",this.img_loadingCarCon.x+=Math.floor(this.loadingLength/e)},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){switch(n.label){case 0:return[4,this.loadResource()];case 1:return n.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=n.sent(),[4,platform.login()];case 3:return n.sent(),[4,platform.getUserInfo()];case 4:return e=n.sent(),console.log(e),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,RES.loadGroup("preload",0,t)];case 2:return n.sent(),this.stage.removeChild(t),[3,4];case 3:return e=n.sent(),console.error(e),[3,4];case 4:return[2]}})})},e.prototype.createGameScene=function(){this.addChild(ViewManager.getInstance())},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var common;!function(t){function e(){return egret.MainContext.instance.stage}function n(){return egret.MainContext.instance.stage.stageWidth}function i(){return egret.MainContext.instance.stage.stageHeight}function r(t){var e=new egret.Bitmap,n=RES.getRes(t);return e.texture=n,e}function a(e,n,i){switch(e){case 1:egret.Tween.get(n).to({y:0},500,egret.Ease.circIn).call(function(){i&&i()});break;case 2:egret.Tween.get(n).to({y:-t.curHeight()},300,egret.Ease.circIn).call(function(){i&&i()})}}t.curStage=e,t.curWidth=n,t.curHeight=i,t.createBitmapByName=r,t.gameOver=a}(common||(common={}));var CarFactory=function(t){function e(){var e=t.call(this)||this;return e.cache={},e.liveCarArray=[],e}return __extends(e,t),e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.produce=function(t){null==this.cache[t]&&(this.cache[t]=[]);var e,n=this.cache[t];return e=n.length?n.shift():new Car(t),this.liveCarArray.push(e),e},e.prototype.reclaim=function(t){null==this.cache[t.name]&&(this.cache[t.name]=[]);var e=this.cache[t.name];-1==e.indexOf(t)&&this.cache[t.name].push(t);var n=this.liveCarArray.indexOf(t);-1!=n&&this.liveCarArray.splice(n,1)},e}(egret.Sprite);__reflect(CarFactory.prototype,"CarFactory");var game;!function(t){function e(t,e,n){t.type==egret.TouchEvent.TOUCH_BEGIN?(t.currentTarget.scaleX=1.05,t.currentTarget.scaleY=1.05):t.type==egret.TouchEvent.TOUCH_END?(t.currentTarget.scaleX=1,t.currentTarget.scaleY=1,e&&e()):t.type==egret.TouchEvent.TOUCH_RELEASE_OUTSIDE&&(t.currentTarget.scaleX=1,t.currentTarget.scaleY=1,n&&n())}t.touchAction=e}(game||(game={}));var ViewManager=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.init=function(){this.sceneBegin=new SceneBegin,this.sceneGame=new SceneGame,this.sceneEnd=new SceneEnd,this.start()},e.prototype.start=function(){this.initListener(),this.addChild(this.sceneBegin),this.sceneBegin.start()},e.prototype.initListener=function(){this.addEventListener(SceneEvents.SCENE_CHANGE,this.onChangeScene,this)},e.prototype.toBegin=function(){var t=this;common.gameOver(2,this.sceneEnd,function(){t.sceneBegin.start(),t.removeChild(t.sceneEnd)}),this.sceneEnd.end(),this.addChildAt(this.sceneBegin,0)},e.prototype.toGame=function(){var t=this;ScreenMovies.MovieStart(5,function(){t.sceneGame.start()}),this.sceneBegin.end(),this.addChildAt(this.sceneGame,0),this.removeChild(this.sceneBegin)},e.prototype.toEnd=function(){var t=this;common.gameOver(1,this.sceneEnd,function(){t.sceneEnd.start()}),this.sceneGame.end(),this.addChildAt(this.sceneEnd,0),this.removeChild(this.sceneGame)},e.prototype.onChangeScene=function(t){switch(t.eventType){case SceneEvents.TO_BEGIN:this.toBegin();break;case SceneEvents.TO_GAME:this.toGame();break;case SceneEvents.TO_END:this.toEnd()}},e}(egret.DisplayObjectContainer);__reflect(ViewManager.prototype,"ViewManager");var SceneEvents=function(t){function e(e,n,i){return void 0===n&&(n=!1),void 0===i&&(i=!1),t.call(this,e,n,i)||this}return __extends(e,t),e.SCENE_CHANGE="scene_change",e.TO_BEGIN="to_begin",e.TO_GAME="to_game",e.TO_END="to_end",e}(egret.Event);__reflect(SceneEvents.prototype,"SceneEvents");var MoveUtil=function(t){function e(e,n){void 0===n&&(n=!0);var i=t.call(this)||this;return i._startPos=new egret.Point(0,0),i._endPos=new egret.Point(0,common.curHeight()),i._speedY=Data.startSpeed,i._startSpeedY=Data.startSpeed,i.obj=null,i.isLoop=!0,i._aSpeedY=.1,i.isGetDistance=!1,i.preEnterFrameTime=0,i.moveFrameNum=60,i.obj=e,i.isLoop=n,i}return __extends(e,t),Object.defineProperty(e.prototype,"startPos",{set:function(t){this._startPos!==t&&(this._startPos=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPos",{set:function(t){this._endPos!==t&&(this._endPos=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speedY",{set:function(t){this._startSpeedY!==t&&(this._startSpeedY=t)},enumerable:!0,configurable:!0}),e.prototype.getDistance=function(t){void 0===t&&(t=!1),this.isGetDistance=t},e.prototype.onEnterFrame=function(){if(!this.obj)return null;if(this.obj.y+=Math.floor(this._speedY),this._speedY>=Data.mostSpeed&&(this._speedY=Data.mostSpeed),this.obj.y>=this._endPos.y&&this.isLoop)this.obj.y=this._startPos.y;else if(this.obj.y>=this._endPos.y&&!this.isLoop)return void(this.obj=null);var t=Date.now();t-this.preEnterFrameTime>this.moveFrameNum&&(this.preEnterFrameTime=t,this._speedY+=this._aSpeedY,this.isLoop&&this.isGetDistance&&(Data.distanceLength+=.5*(this._speedY+this._startSpeedY),Data.currentSpeedY=this._speedY))},e}(egret.Sprite);__reflect(MoveUtil.prototype,"MoveUtil");var Car=function(t){function e(e){var n=t.call(this)||this;return n.startPos=new egret.Point,n.move=new MoveUtil(n,!1),n.name=e,n.texture=RES.getRes(e),null==n.texture&&console.log("car 资源名称不对"),n.addEventListener(egret.Event.ADDED,n.onAdded,n),n}return __extends(e,t),e.prototype.init=function(t){void 0===t&&(t=0);var e=0==t?100:280;this.move.startPos=new egret.Point(0,-this.texture.textureHeight),this.move.endPos=new egret.Point(0,common.curHeight()),this.startPos.x=e,this.startPos.y=-this.texture.textureHeight},e.prototype.onAdded=function(){this.x=this.startPos.x,this.y=this.startPos.y},e.prototype.onEnterFrame=function(){this.move&&(this.move.onEnterFrame(),this.y>common.curHeight()&&this.distory())},e.prototype.setSpeed=function(t){this.move.speedY=t},e.prototype.distory=function(){this&&this.parent&&(this.parent.removeChild(this),CarFactory.getInstance().reclaim(this))},e}(egret.Bitmap);__reflect(Car.prototype,"Car");var SceneBegin=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.createBg()},e.prototype.start=function(){this.btn_start.touchEnabled=!0,this.btn_start.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.gameStart,this),this.btn_start.addEventListener(egret.TouchEvent.TOUCH_END,this.gameStart,this),this.btn_start.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.gameStart,this)},e.prototype.end=function(){this.btn_start.touchEnabled=!1,this.btn_start.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.gameStart,this),this.btn_start.removeEventListener(egret.TouchEvent.TOUCH_END,this.gameStart,this),this.btn_start.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.gameStart,this)},e.prototype.createBg=function(){var t=common.createBitmapByName("bg_png");this.addChild(t),t.width=common.curWidth(),t.height=common.curHeight(),this.btn_start=common.createBitmapByName("startGameBtn_png"),this.addChild(this.btn_start),this.btn_start.x=(common.curWidth()-this.btn_start.width)/2,this.btn_start.y=common.curHeight()-200;var e=common.createBitmapByName("startLine_png");this.addChild(e),e.x=(common.curWidth()-e.width)/2,e.y=(common.curHeight()-e.height)/2-20},e.prototype.gameStart=function(t){var e=this;game.touchAction(t,function(){var t=new SceneEvents(SceneEvents.SCENE_CHANGE);t.eventType=SceneEvents.TO_GAME,t.eventObj=e,ViewManager.getInstance().dispatchEvent(t)})},e}(egret.DisplayObjectContainer);__reflect(SceneBegin.prototype,"SceneBegin");var SceneEnd=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.createScene()},e.prototype.start=function(){this.btn_restart.touchEnabled=!0,this.btn_restart.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.gameRestart,this),this.btn_restart.addEventListener(egret.TouchEvent.TOUCH_END,this.gameRestart,this),this.btn_restart.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.gameRestart,this),Data.gameResult?this.img_success.alpha=1:this.img_fail.alpha=1},e.prototype.end=function(){var t=this;this.btn_restart.touchEnabled=!1,this.btn_restart.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.gameRestart,this),this.btn_restart.removeEventListener(egret.TouchEvent.TOUCH_END,this.gameRestart,this),this.btn_restart.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.gameRestart,this),setTimeout(function(){t.img_fail.alpha=0,t.img_success.alpha=0},300)},e.prototype.createScene=function(){var t=new egret.Sprite,e=common.createBitmapByName("noticeBg_png");this.btn_restart=common.createBitmapByName("playAgainBtn_png"),this.img_fail=common.createBitmapByName("failedNotice_png"),this.img_success=common.createBitmapByName("succeededNotice_png"),t.addChild(e),t.addChild(this.img_fail),t.addChild(this.img_success),t.addChild(this.btn_restart),t.x=(common.curWidth()-t.width)/2,t.y=(common.curHeight()-t.height)/2-100,this.btn_restart.x=(t.width-this.btn_restart.width)/2,this.btn_restart.y=e.height+this.btn_restart.height,this.img_fail.x=this.img_success.x=(e.width-this.img_fail.width)/2,this.img_fail.y=this.img_success.y=(e.height-this.img_fail.height)/2,this.img_fail.alpha=0,this.img_success.alpha=0,this.addChild(t),this.y=-common.curHeight()},e.prototype.gameRestart=function(t){var e=this;game.touchAction(t,function(){var t=new SceneEvents(SceneEvents.SCENE_CHANGE);t.eventType=SceneEvents.TO_BEGIN,t.eventObj=e,ViewManager.getInstance().dispatchEvent(t)})},e}(egret.DisplayObjectContainer);__reflect(SceneEnd.prototype,"SceneEnd");var SceneGame=function(t){function e(){var e=t.call(this)||this;return e.heroCon=new egret.Sprite,e.isTouching=!1,e.startTouchPos=new egret.Point,e.carsName=["car0_png","car1_png","car2_png"],e.preProduceCarTime=0,e.carLayer=new egret.Sprite,e.sumSarsNum=0,e.distanceNum=new egret.BitmapText,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.createBg(),this.createHero()},e.prototype.start=function(){var t=this;this.startTips(function(){egret.Tween.get(t.carLight,{loop:!0}).to({alpha:0},300).to({alpha:1},300),t.touchEnabled=!0,t.addEventListener(egret.Event.ENTER_FRAME,t.onEnterFrame,t),t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.touchBegin,t),t.bg01MoveUtil.getDistance(!0)})},e.prototype.end=function(){this.touchEnabled=!0,this.resetData(),this.hasEventListener(egret.Event.ENTER_FRAME)&&this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.hasEventListener(egret.TouchEvent.TOUCH_BEGIN)&&this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),egret.Tween.removeTweens(this.carLight),this.carLight.alpha=1},e.prototype.touchBegin=function(t){this.isTouching=!0,this.startTouchPos.x=t.stageX,this.startTouchPos.y=t.stageY,this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},e.prototype.touchMove=function(t){var e=this;this.isTouching&&(t.stageX-this.startTouchPos.x>50?(this.isTouching=!1,egret.Tween.get(this.heroCon).to({x:287},300).call(function(t){e.isTouching=!0},this)):t.stageX-this.startTouchPos.x<-50&&(this.isTouching=!1,egret.Tween.get(this.heroCon).to({x:100},300).call(function(t){e.isTouching=!0},this))),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this)},e.prototype.touchEnd=function(t){this.isTouching=!1,this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this)},e.prototype.createBg=function(){this.bg01=common.createBitmapByName("bg_png"),this.bg02=common.createBitmapByName("bg_png"),this.bg01.width=this.bg02.width=common.curWidth(),this.bg01.height=this.bg02.height=common.curHeight(),this.addChild(this.bg01),this.addChild(this.bg02),this.addChild(this.carLayer);var t=new egret.Sprite,e=common.createBitmapByName("roadnumBg_png");t.addChild(e),this.addChild(t),t.addChild(this.distanceNum),this.distanceNum.text="0",this.distanceNum.x=0,this.distanceNum.y=36,this.distanceNum.font=RES.getRes("roadnum_fnt"),t.x=common.curWidth()-e.width,t.y=100,this.bg02.y=-common.curHeight(),this.bg01MoveUtil=new MoveUtil(this.bg01),this.bg02MoveUtil=new MoveUtil(this.bg02),this.bg01MoveUtil.startPos=new egret.Point(0,0),this.bg01MoveUtil.endPos=new egret.Point(0,common.curHeight()),this.bg02MoveUtil.startPos=new egret.Point(0,-common.curHeight()),this.bg02MoveUtil.endPos=new egret.Point(0,0)},e.prototype.createHero=function(){this.car=common.createBitmapByName("hero_png"),this.carLight=common.createBitmapByName("carLight_png"),this.heroCon.addChild(this.carLight),this.heroCon.addChild(this.car),this.car.x=this.heroCon.width-this.car.width+1,this.car.y=this.carLight.height-22,this.heroCon.x=common.curWidth()-200,this.heroCon.y=common.curHeight()-300,this.addChild(this.heroCon)},e.prototype.startTips=function(t){var e=this,n=common.createBitmapByName("startnum1_png"),i=common.createBitmapByName("startnum2_png"),r=common.createBitmapByName("startnum3_png");this.addChild(n),this.addChild(i),this.addChild(r),n.anchorOffsetX=n.width/2,i.anchorOffsetX=i.width/2,r.anchorOffsetX=r.width/2,n.anchorOffsetY=n.height/2,i.anchorOffsetY=i.height/2,r.anchorOffsetY=r.height/2,n.x=i.x=r.x=common.curWidth()/2,n.y=i.y=r.y=common.curHeight()/2,n.alpha=i.alpha=r.alpha=0,e.startTimeAnim(r,function(){e.startTimeAnim(i,function(){e.startTimeAnim(n,function(){t&&t()})})})},e.prototype.startTimeAnim=function(t,e){egret.Tween.get(t).to({alpha:1,scaleX:1.35,scaleY:1.35}).to({scaleX:1,scaleY:1},1e3,egret.Ease.backInOut).call(function(){t.parent&&t.parent.removeChild(t),e()})},e.prototype.randomCreateCar=function(){this.sumSarsNum++;var t=Math.floor(3*Math.random()),e=CarFactory.getInstance().produce(this.carsName[t]),n=Math.floor(2*Math.random());e.init(n),e.setSpeed(Data.currentSpeedY-2),this.carLayer.addChild(e)},e.prototype.onEnterFrame=function(t){this.isOver()&&this.gameEnd();var e=egret.getTimer();if(e-this.preProduceCarTime>Math.floor(500*Math.random()+1500)&&(this.randomCreateCar(),this.preProduceCarTime=e),CarFactory.getInstance().liveCarArray.length)for(var n,i=CarFactory.getInstance().liveCarArray.length-1;i>=0;i--)n=CarFactory.getInstance().liveCarArray[i],n.setSpeed(Data.currentSpeedY-2),n.onEnterFrame();this.bg01MoveUtil.onEnterFrame(),this.bg02MoveUtil.onEnterFrame(),this.distanceNum.text=Math.floor(Data.distanceLength).toString()},e.prototype.resetData=function(){this.bg01.y=0,this.bg02.y=-common.curHeight(),this.bg01MoveUtil._speedY=Data.startSpeed,this.bg02MoveUtil._speedY=Data.startSpeed,this.heroCon.x=common.curWidth()-200,Data.distanceLength=0,this.bg01MoveUtil.getDistance(!1),CarFactory.getInstance().liveCarArray.length=0},e.prototype.isOver=function(){if(Data.distanceLength>=Data.targetDistance)return Data.gameResult=!0,!0;for(var t,e=CarFactory.getInstance().liveCarArray.length-1;e>=0;e--)if(t=CarFactory.getInstance().liveCarArray[e],this.isHit(t,this.car))return Data.gameResult=!1,!0},e.prototype.isHit=function(t,e,n){var i,r,a=t,s=e;return n?(i=s.x,r=s.y):(i=s.localToGlobal().x,r=s.localToGlobal().y),Math.abs(a.x-i)<.5*(a.width+s.width)&&Math.abs(a.y-r)<.5*(a.height+s.height)?!0:!1},e.prototype.gameEnd=function(){this.carLayer.removeChildren();var t=new SceneEvents(SceneEvents.SCENE_CHANGE);t.eventType=SceneEvents.TO_END,t.eventObj=this,ViewManager.getInstance().dispatchEvent(t)},e}(egret.DisplayObjectContainer);__reflect(SceneGame.prototype,"SceneGame");